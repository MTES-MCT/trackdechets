in:
  type: file
  path_prefix: {{ env.DATA_DIR }}/sirene
  parser:
    charset: UTF-8
    newline: LF
    type: csv
    delimiter: ;
    quote: '"'
    escape: '"'
    trim_if_not_quoted: false
    skip_header_lines: 1
    allow_extra_columns: false
    allow_optional_columns: false
    columns:
    - {name: __IDX, type: long}
    - {name: code_s3ic, type: string}
    - {name: cd_insee, type: string}
    - {name: nom_ets, type: string}
    - {name: __CONFIDENCE, type: double}
    - {name: __ES_SCORE, type: double}
    - {name: __ID_QUERY, type: double}
    - {name: __ID_REF, type: long}
    - {name: __IS_MATCH, type: boolean}
    - {name: __THRESH, type: double}
    - {name: activiteprincipaleunitelegale__REF, type: string}
    - {name: caractereemployeuretablissement__REF, type: string}
    - {name: caractereemployeurunitelegale__REF, type: string}
    - {name: categorieentreprise__REF, type: string}
    - {name: categoriejuridiqueunitelegale__REF, type: long}
    - {name: codecommuneetablissement__REF, type: string}
    - {name: codepostaletablissement__REF, type: string}
    - {name: complementadresseetablissement__REF, type: string}
    - {name: datecreationetablissement__REF, type: timestamp, format: '%Y-%m-%d'}
    - {name: datecreationunitelegale__REF, type: timestamp, format: '%Y-%m-%d'}
    - {name: datedebut__REF, type: timestamp, format: '%Y-%m-%d'}
    - {name: denominationunitelegale__REF, type: string}
    - {name: enseigne1etablissement__REF, type: string}
    - {name: etablissementsiege__REF, type: boolean}
    - {name: etatadministratifetablissement__REF, type: string}
    - {name: etatadministratifunitelegale__REF, type: string}
    - {name: libellecommuneetablissement__REF, type: string}
    - {name: libellevoieetablissement__REF, type: string}
    - {name: nic__REF, type: string}
    - {name: nicsiegeunitelegale__REF, type: string}
    - {name: nombreperiodesetablissement__REF, type: long}
    - {name: nomenclatureactiviteprincipaleetablissement__REF, type: string}
    - {name: nomenclatureactiviteprincipaleunitelegale__REF, type: string}
    - {name: nomusageunitelegale__REF, type: string}
    - {name: numerovoieetablissement__REF, type: long}
    - {name: sigleunitelegale__REF, type: string}
    - {name: siren__REF, type: long}
    - {name: siret__REF, type: long}
    - {name: statutdiffusionetablissement__REF, type: string}
    - {name: statutdiffusionunitelegale__REF, type: string}
    - {name: trancheeffectifsetablissement__REF, type: string}
    - {name: trancheeffectifsunitelegale__REF, type: string}
    - {name: typevoieetablissement__REF, type: string}
    - {name: x_adresse_complete__REF, type: string}
    - {name: x_nom_complet_unite_legale__REF, type: string}
    - {name: __SOURCE_GROUP, type: string}
out:
  type: postgresql
  host: {{ env.POSTGRES_HOST }}
  user: {{ env.POSTGRES_USER }}
  password: {{ env.POSTGRES_PASSWORD }}
  database: {{ env.POSTGRES_DATABASE }}
  port: {{ env.POSTGRES_PORT }}
  table: s3ic_x_sirene
  schema: etl
  options: {loglevel: 2}
  mode: replace