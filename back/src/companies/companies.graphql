

type Rubrique {
  rubrique: String
  alinea: String
  etatActivite: String
  regimeAutorise: String
  activite: String
  category: String
  volume: String
  unite: String
  wasteType: WasteType
}

enum GerepType {
  Producteur
  Traiteur
}

enum WasteType {
  INERTE
  NOT_DANGEROUS
  DANGEROUS
}

type Declaration {
  annee: String
  codeDechet: String,
  libDechet: String
  gerepType: GerepType
}


type Installation {
  codeS3ic: String
  urlFiche: String
  rubriques: [Rubrique]
  declarations: [Declaration]
}

enum CompanyType {
  PRODUCER
  COLLECTOR
  WASTEPROCESSOR
  TRANSPORTER
  WASTE_VEHICLES
  WASTE_CENTER
  TRADER
}

type Company {

  id: ID!
  siret: String

  # Resolve from INSEE
  siren: String
  naf: String
  libelleNaf: String
  name: String
  address: String
  longitude: Float
  latitude: Float

  # Resolve from s3ic data from ETL
  installation: Installation

  # Resolve from TD
  isRegistered: Boolean
  admins: [PublicUser]
  companyTypes: [CompanyType]

  securityCode: Int!
}

type CompanyFavorite {
  name: String
  siret: String
  address: String
  contact: String
  phone: String
  mail: String
}

type Query {
  companyInfos(siret: String!): Company
  companyUsers(siret: String!): [CompanyMember]
  searchCompanies(clue: String!, department: Int): [Company]
  favorites(type: FavoriteType!): [CompanyFavorite]
}

type Mutation {
  renewSecurityCode: Int
  updateCompany(siret: String, companyTypes: [CompanyType]): Company
}

type CompanyMember {
  id: String
  name: String
  email: String
  role: String
}

enum FavoriteType {
  EMITTER
  TRANSPORTER
  RECIPIENT
  TRADER
}
