import { CompanyType } from "@prisma/client";
import prisma from "../../prisma";

(async () => {
  const sirets = [
    "38348263500141",
    "49786279700063",
    "38348263500323",
    "37922212800025",
    "38348263500166",
    "33214730500012",
    "32702008700091",
    "39070760200061",
    "42383789700044",
    "38348263500562",
    "71262071500326",
    "38348263500406",
    "32702008700059",
    "32051937400021",
    "38348263500257",
    "95062556600019",
    "38348263500273",
    "43311694400037",
    "32702008700067",
    "31587164001694",
    "77983836600028",
    "38348263500422",
    "43969063700012",
    "50173930400019",
    "58208178200465",
    "38348263500083",
    "40316801600042",
    "53286578900012",
    "38348263500539",
    "38348263500547",
    "24840023600217",
    "40267144000012",
    "31055103100100",
    "48152064100046",
    "44595007400143",
    "38348263500349",
    "49991392900018",
    "38348263500174",
    "38348263500182",
    "45397583100034",
    "44489473700030",
    "84223506100012",
    "32702008700034",
    "44489473700055",
    "45090079000012",
    "18440134700143",
    "32702008700109",
    "81739526200014",
    "38348263500059",
    "42279142600055",
    "47968375700039",
    "49814202500036",
    "45397583100190",
    "44489473700014",
    "38348263500190",
    "38348263500521",
    "45374149800027",
    "48803489300013",
    "32702008700117",
    "81761178300017",
    "38348263500604",
    "38348263500497",
    "47860627000021",
    "38348263500331",
    "20004306500016",
    "38348263500265",
    "38348263500489",
    "32702008700075",
    "45397583100224",
    "72820653300958",
    "38348263500315",
    "89066519300011",
    "32702008700026",
    "49801095800029",
    "91365644300011",
    "38348263500455",
    "38348263500554",
    "38348263500364",
    "32702008700018",
    "38348263500588",
    "33214730500020",
    "44314690700011",
    "48962788500010",
    "40336285800025",
    "32702008700125",
    "38348263500208",
    "38348263500570",
    "38348263500661",
    "50173930400035",
    "19920134400017",
    "39033440700025",
    "82110387600040",
    "42171646500180"
  ];
  for (const siret of sirets) {
    const company = await prisma.company.findUnique({ where: { siret } });
    let companyTypes = company.companyTypes.filter(
      ct => ct !== CompanyType.ECO_ORGANISME
    );
    if (companyTypes.length === 0) {
      companyTypes = [CompanyType.PRODUCER];
    }
    console.log(company.name, companyTypes);
    const { name, companyTypes: updatedCompanyTypes } =
      await prisma.company.update({
        where: { id: company.id },
        data: { companyTypes }
      });
    console.log(name, updatedCompanyTypes);
  }
})();
