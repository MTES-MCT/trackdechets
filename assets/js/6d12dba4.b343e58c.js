"use strict";(self.webpackChunktrackdechets=self.webpackChunktrackdechets||[]).push([[2317],{4856:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"reference/api-reference/user-company/queries","title":"Queries","description":"companyInfos","source":"@site/docs/reference/api-reference/user-company/queries.md","sourceDirName":"reference/api-reference/user-company","slug":"/reference/api-reference/user-company/queries","permalink":"/reference/api-reference/user-company/queries","draft":false,"unlisted":false,"editUrl":"https://github.com/MTES-MCT/trackdechets/edit/dev/doc/docs/reference/api-reference/user-company/queries.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"queries","title":"Queries","slug":"queries","sidebar_position":1},"sidebar":"docs","previous":{"title":"Scalars","permalink":"/reference/api-reference/bsvhu/scalars"},"next":{"title":"Mutations","permalink":"/reference/api-reference/user-company/mutations"}}');var i=n(4848),t=n(8453);const l={id:"queries",title:"Queries",slug:"queries",sidebar_position:1},c=void 0,a={},d=[{value:"companyInfos",id:"companyinfos",level:2},{value:"ecoOrganismes",id:"ecoorganismes",level:2},{value:"me",id:"me",level:2},{value:"membershipRequest",id:"membershiprequest",level:2},{value:"myCompanies",id:"mycompanies",level:2},{value:"myCompaniesCsv",id:"mycompaniescsv",level:2},{value:"myCompaniesXls",id:"mycompaniesxls",level:2},{value:"searchCompanies",id:"searchcompanies",level:2}];function o(e){const s={a:"a",h2:"h2",p:"p",strong:"strong",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"companyinfos",children:"companyInfos"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"objects#companypublic",children:"CompanyPublic!"})]}),"\n",(0,i.jsx)(s.p,{children:"Renvoie des informations autoris\xe9es \xe0 la diffusion publique sur un \xe9tablissement\nLes informations proviennent de l'INSEE (Sirene) ou de la base europ\xe9enne VIES\npour les num\xe9ros de TVA intracommunautaires (entreprises hors France)\nainsi que de la base des installations class\xe9es pour la protection de l'environnement (ICPE)"}),"\n",(0,i.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,i.jsx)("strong",{children:"Arguments"})}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),(0,i.jsx)("th",{children:"Description"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["siret",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#string",children:(0,i.jsx)("code",{children:"String"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"SIRET de l'\xe9tablissement, supporte aussi un num\xe9ro TVA intracommunautaire"})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["clue",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#string",children:(0,i.jsx)("code",{children:"String"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"Autre identifiant, par ex. num\xe9ro TVA intracommunautaire"})})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"ecoorganismes",children:"ecoOrganismes"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"objects#ecoorganisme",children:"[EcoOrganisme!]!"})]}),"\n",(0,i.jsx)(s.p,{children:"Renvoie la liste des \xe9co-organismes\nPeut \xeatre utilis\xe9 sans filtres, auquel cas tous les \xe9co-organismes sont renvoy\xe9s\nSinon passer true sur l'un ou plusieurs des filtres renvoit les \xe9co-organismes pouvant\n\xeatre associ\xe9s aux bordereaux correspondants"}),"\n",(0,i.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,i.jsx)("strong",{children:"Arguments"})}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),(0,i.jsx)("th",{children:"Description"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["handleBsdd",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#boolean",children:(0,i.jsx)("code",{children:"Boolean"})})]})}),(0,i.jsx)("td",{})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["handleBsda",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#boolean",children:(0,i.jsx)("code",{children:"Boolean"})})]})}),(0,i.jsx)("td",{})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["handleBsdasri",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#boolean",children:(0,i.jsx)("code",{children:"Boolean"})})]})}),(0,i.jsx)("td",{})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["handleBsvhu",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#boolean",children:(0,i.jsx)("code",{children:"Boolean"})})]})}),(0,i.jsx)("td",{})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"me",children:"me"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"objects#user",children:"User!"})]}),"\n",(0,i.jsx)(s.p,{children:"Renvoie les informations sur l'utilisateur authentifi\xe9"}),"\n",(0,i.jsx)(s.h2,{id:"membershiprequest",children:"membershipRequest"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"objects#membershiprequest",children:"MembershipRequest!"})]}),"\n",(0,i.jsx)(s.p,{children:"R\xe9cup\xe8re une demande de rattachement effectu\xe9e par l'utilisateur courant\n\xe0 partir de l'identifiant de cette demande ou du SIRET de l'\xe9tablissement\nauquel l'utilisateur a demand\xe9 \xe0 \xeatre rattach\xe9. L'un ou l'autre des\nparam\xe8tres (id ou siret) doit \xeatre \xeatre pass\xe9 mais pas les deux. Cette query\npermet notamment de suivre l'\xe9tat d'avancement de la demande de rattachement\n(en attente, accept\xe9, refus\xe9)"}),"\n",(0,i.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,i.jsx)("strong",{children:"Arguments"})}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),(0,i.jsx)("th",{children:"Description"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["id",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#id",children:(0,i.jsx)("code",{children:"ID"})})]})}),(0,i.jsx)("td",{})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["siret",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#string",children:(0,i.jsx)("code",{children:"String"})})]})}),(0,i.jsx)("td",{})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"mycompanies",children:"myCompanies"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"objects#companyprivateconnection",children:"CompanyPrivateConnection!"})]}),"\n",(0,i.jsx)(s.p,{children:"Liste pagin\xe9e des \xe9tablissements de l'utilisateur authentifi\xe9 tri\xe9e par ordre alphab\xe9tique\ndu nom usuel et par d\xe9faut par date de cr\xe9ation de l'\xe9tablissement"}),"\n",(0,i.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,i.jsx)("strong",{children:"Arguments"})}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),(0,i.jsx)("th",{children:"Description"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["first",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#int",children:(0,i.jsx)("code",{children:"Int"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"Pagination croissante avec first et after"})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["after",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#id",children:(0,i.jsx)("code",{children:"ID"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"Pagination croissante avec first et after"})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["last",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#int",children:(0,i.jsx)("code",{children:"Int"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"Pagination d\xe9croissante avec last et before"})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["before",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#id",children:(0,i.jsx)("code",{children:"ID"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"Pagination d\xe9croissante avec last et before"})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["search",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#string",children:(0,i.jsx)("code",{children:"String"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"USAGE INTERNE - Filtre par nom, siret ou num\xe9ro de TVA - cha\xeene comprise entre 3 et 30 caract\xe8res"})})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"mycompaniescsv",children:"myCompaniesCsv"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"objects#filedownload",children:"FileDownload"})]}),"\n",(0,i.jsx)(s.p,{children:"Export CSV de la liste des \xe9tablissements de l'utilisateur authentifi\xe9 et\nde tous les utilisateurs appartenant \xe0 ces \xe9tablissements (une ligne par \xe9tablissement\net par utilisateur)"}),"\n",(0,i.jsx)(s.h2,{id:"mycompaniesxls",children:"myCompaniesXls"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"objects#filedownload",children:"FileDownload"})]}),"\n",(0,i.jsx)(s.p,{children:"Export Excel de la liste des \xe9tablissements de l'utilisateur authentifi\xe9 et\nde tous les utilisateurs appartenant \xe0 ces \xe9tablissements (une ligne par \xe9tablissement\net par utilisateur)"}),"\n",(0,i.jsx)(s.h2,{id:"searchcompanies",children:"searchCompanies"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Type:"})," ",(0,i.jsx)(s.a,{href:"objects#companysearchresult",children:"[CompanySearchResult!]!"})]}),"\n",(0,i.jsx)(s.p,{children:"Effectue une recherche floue sur la base SIRENE et enrichie\navec des informations provenant de Trackd\xe9chets\nSi vous envoyez un num\xe9ro de SIRET ou de TVA la recherche renverra un seul item\nidendique \xe0 celui de la requ\xeate companyInfos (ignorant alors le champ department)."}),"\n",(0,i.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,i.jsx)("strong",{children:"Arguments"})}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Name"}),(0,i.jsx)("th",{children:"Description"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["clue",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#string",children:(0,i.jsx)("code",{children:"String!"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"Champ utilis\xe9 pour faire une recherche floue\nsur le nom de l'\xe9tablissement, ex: 'Boulangerie Dupont',\nou sur le num\xe9ro de SIRET ou TVA intracommunautaire"})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["department",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#string",children:(0,i.jsx)("code",{children:"String"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"(Optionnel) Filtre les r\xe9sultats par num\xe9ro de d\xe9partement fran\xe7ais"})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:(0,i.jsxs)(s.p,{children:["allowForeignCompanies",(0,i.jsx)("br",{}),"\n",(0,i.jsx)("a",{href:"scalars#boolean",children:(0,i.jsx)("code",{children:"Boolean"})})]})}),(0,i.jsx)("td",{children:(0,i.jsx)("p",{children:"(Optionnel) Filtre les r\xe9sultats \xe9trangers uniquement,\nsi 'clue' est un num\xe9ro de TVA intra-communautaire non-fran\xe7ais et allowForeignCompanies,\nalors aucun r\xe9sultat ne sera retourn\xe9"})})]})]})]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>c});var r=n(6540);const i={},t=r.createContext(i);function l(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);