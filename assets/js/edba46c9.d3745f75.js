"use strict";(self.webpackChunktrackdechets=self.webpackChunktrackdechets||[]).push([[1145],{2825:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"guides/sirene","title":"Rechercher un \xe9tablissement partenaire sur l\'API Trackd\xe9chets","description":"Nous exposons une query searchCompanies qui interroge la base SIRENE (via les donn\xe9es ouvertes de l\'INSEE), ou la base VIES (via le service la commission europ\xe9enne) la base des installations class\xe9es pour la protection de l\'environnement (ICPE) et la base Trackd\xe9chets pour obtenir des informations sur un \xe9tablissement \xe0 partir de son num\xe9ro SIRET, sa raison sociale, ou son num\xe9ro de TVA intra-communautaire.","source":"@site/docs/guides/sirene.md","sourceDirName":"guides","slug":"/guides/sirene","permalink":"/guides/sirene","draft":false,"unlisted":false,"editUrl":"https://github.com/MTES-MCT/trackdechets/edit/dev/doc/docs/guides/sirene.md","tags":[],"version":"current","frontMatter":{"title":"Rechercher un \xe9tablissement partenaire sur l\'API Trackd\xe9chets"},"sidebar":"docs","previous":{"title":"Exporter un registre","permalink":"/guides/registre"},"next":{"title":"Cr\xe9er une application OAuth2","permalink":"/guides/oauth2"}}');var a=s(4848),t=s(8453);const i={title:"Rechercher un \xe9tablissement partenaire sur l'API Trackd\xe9chets"},o="Par son nom, ou par n\xb0 SIRET ou par son n\xb0TVA intracommunautaire pour les entreprises europ\xe9ennes.",c={},u=[];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"par-son-nom-ou-par-n-siret-ou-par-son-ntva-intracommunautaire-pour-les-entreprises-europ\xe9ennes",children:"Par son nom, ou par n\xb0 SIRET ou par son n\xb0TVA intracommunautaire pour les entreprises europ\xe9ennes."})}),"\n",(0,a.jsxs)(n.p,{children:["Nous exposons une query ",(0,a.jsx)(n.a,{href:"/reference/api-reference/user-company/queries#searchcompanies",children:(0,a.jsx)(n.code,{children:"searchCompanies"})})," qui interroge la base SIRENE (via ",(0,a.jsx)(n.a,{href:"https://files.data.gouv.fr/insee-sirene/",children:"les donn\xe9es ouvertes de l'INSEE"}),"), ou la base VIES (via ",(0,a.jsx)(n.a,{href:"https://ec.europa.eu/taxation_customs/vies/",children:"le service la commission europ\xe9enne"}),") la base des installations class\xe9es pour la protection de l'environnement (ICPE) et la base Trackd\xe9chets pour obtenir des informations sur un \xe9tablissement \xe0 partir de son num\xe9ro SIRET, sa raison sociale, ou son num\xe9ro de TVA intra-communautaire."]}),"\n",(0,a.jsxs)(n.p,{children:["Elle requiert un token d'API Trackd\xe9chets et permet d'acc\xe9der \xe0 toutes les informations d'un \xe9tablissement sur Trackd\xe9chet et \xe0 jour des bases de l'INSEE ou de VIES (via ",(0,a.jsx)(n.a,{href:"https://ec.europa.eu/taxation_customs/vies/",children:"le service la commission europ\xe9enne"}),")."]}),"\n",(0,a.jsxs)(n.p,{children:["La query renvoie un objet de type ",(0,a.jsx)(n.a,{href:"/reference/api-reference/user-company/objects#companysearchresult",children:(0,a.jsx)(n.code,{children:"CompanySearchResult"})})," et permet notamment de savoir si un \xe9tablissement est inscrit sur Trackd\xe9chets gr\xe2ce au champ ",(0,a.jsx)(n.code,{children:"isRegistered"}),", mais aussi les coordonn\xe9es de l'\xe9tablissement, comme le type d'\xe9tablissement sur Trackd\xe9chets."]}),"\n",(0,a.jsxs)(n.p,{children:["Pour retourner les \xe9tablissements \xe9trangers quand on cherche par ",(0,a.jsx)(n.code,{children:'clue : "NUMERODETVA"'}),", il faut activer \xe0 ",(0,a.jsx)(n.code,{children:"true"})," le param\xe8tre ",(0,a.jsx)(n.code,{children:"allowForeignCompanies"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Pour rechercher par raison sociale un \xe9tablissement fran\xe7ais, en filtrant par d\xe9partement, il faut utiliser le param\xe8tre ",(0,a.jsx)(n.code,{children:"department"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:['M\xeame si l\'\xe9tablissement demand\xe9 est enregistr\xe9 aupr\xe8s de l\'INSEE comme "non-diffusible" ou "prot\xe9g\xe9" (c\'est-\xe0-dire si ',(0,a.jsx)(n.code,{children:"statutDiffusionEtablissement"}),' ne renvoie pas "O"), nous les renverrons dans cette requ\xeate ',(0,a.jsx)(n.code,{children:"searchCompanies"})," car elle est prot\xe9g\xe9e par authentification sur l'API Trackdechets et que ces informations sont renseign\xe9es dans la base Trackd\xe9chets."]}),"\n",(0,a.jsxs)(n.p,{children:["Exemple d'utilisation avec ",(0,a.jsx)(n.code,{children:"clue"})," comme recherche plein-texte dans le nom d'\xe9tablissement ou d'unit\xe9 l\xe9gale :"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query {\n  searchCompanies(clue: "DIRECTION REGIONALE DE L\'ETABLISSEMENT") {\n    name\n    naf\n    address\n    isRegistered\n    contactEmail\n  }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "searchCompanies": [{\n      "name": "DIRECTION REGIONALE DE L\'ETABLISSEMENT",\n      "naf": "84.13Z",\n      "address": "51 Rue Arthur Ranc 86000 Poitiers",\n      "isRegistered": true,\n      "contactEmail": "test@test.com"\n    }]\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h1,{id:"par-son-n-siret-pour-les-entreprises-fran\xe7aises-ou-par-son-ntva-intracommunautaire-pour-les-entreprises-europ\xe9ennes",children:"Par son n\xb0 SIRET pour les entreprises fran\xe7aises ou par son n\xb0TVA intracommunautaire pour les entreprises europ\xe9ennes."}),"\n",(0,a.jsxs)(n.p,{children:["Nous exposons une query ",(0,a.jsx)(n.a,{href:"/reference/api-reference/user-company/queries#companyinfos",children:(0,a.jsx)(n.code,{children:"companyInfos"})})," qui interroge la base SIRENE (via ",(0,a.jsx)(n.a,{href:"https://files.data.gouv.fr/insee-sirene/",children:"les donn\xe9es ouvertes de l'INSEE"}),"), ou la base VIES (via ",(0,a.jsx)(n.a,{href:"https://ec.europa.eu/taxation_customs/vies/",children:"le service la commission europ\xe9enne"}),") la base des installations class\xe9es pour la protection de l'environnement (ICPE) et la base Trackd\xe9chets pour obtenir des informations sur un \xe9tablissement \xe0 partir de son num\xe9ro SIRET."]}),"\n",(0,a.jsxs)(n.p,{children:["La requ\xeate renvoie un objet de type ",(0,a.jsx)(n.a,{href:"/reference/api-reference/user-company/objects#companypublic",children:(0,a.jsx)(n.code,{children:"CompanyPublic"})})," et permet notamment de savoir si un \xe9tablissement est inscrit sur Trackd\xe9chets gr\xe2ce au champ ",(0,a.jsx)(n.code,{children:"isRegistered"}),'. Si l\'\xe9tablissement demand\xe9 est enregistr\xe9 aupr\xe8s de l\'INSEE comme  "non-diffusible" ou "prot\xe9g\xe9" (c\'est-\xe0-dire si ',(0,a.jsx)(n.code,{children:"statutDiffusionEtablissement"}),' ne renvoie pas "O"), nous ne les r\xe9v\xe8lerons pas dans cette requ\xeate ',(0,a.jsx)(n.code,{children:"companyInfos"}),". Il faudra utiliser la requ\xeate authentifi\xe9e ",(0,a.jsx)(n.code,{children:"searchCompanies"})," document\xe9e sur cette page en passant le siret comme valeur de la variable ",(0,a.jsx)(n.code,{children:"clue"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"Exemple d'utilisation:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-graphql",children:'query {\n  companyInfos(siret: "13001045700013") {\n    name\n    naf\n    address\n    isRegistered\n    allowBsdasriTakeOverWithoutSignature\n  }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "companyInfos": {\n      "name": "DIRECTION REGIONALE DE L\'ETABLISSEMENT",\n      "naf": "84.13Z",\n      "address": "51 Rue Arthur Ranc 86000 Poitiers",\n      "isRegistered": true,\n      "allowBsdasriTakeOverWithoutSignature": false\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["Nous avons cr\xe9\xe9 une ",(0,a.jsx)(n.strong,{children:"fiche entreprise publique"})," pour chaque \xe9tablissement sur l'interface graphique Trackd\xe9chets qui illustre l'utilisation de cette query. Exemple avec la DREAL Nouvelle Aquitaine: ",(0,a.jsx)(n.a,{href:"https://app.trackdechets.beta.gouv.fr/company/13001045700013",children:"https://app.trackdechets.beta.gouv.fr/company/13001045700013"})]})})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var r=s(6540);const a={},t=r.createContext(a);function i(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);