"use strict";(self.webpackChunktrackdechets=self.webpackChunktrackdechets||[]).push([[6902],{3726:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>o,frontMatter:()=>i,metadata:()=>c,toc:()=>a});var t=s(5893),r=s(1151);const i={id:"mutations",title:"Mutations",slug:"mutations",sidebar_position:2},d=void 0,c={id:"reference/api-reference/bsff/mutations",title:"Mutations",description:"createBsff",source:"@site/docs/reference/api-reference/bsff/mutations.md",sourceDirName:"reference/api-reference/bsff",slug:"/reference/api-reference/bsff/mutations",permalink:"/reference/api-reference/bsff/mutations",draft:!1,unlisted:!1,editUrl:"https://github.com/MTES-MCT/trackdechets/edit/dev/doc/docs/reference/api-reference/bsff/mutations.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"mutations",title:"Mutations",slug:"mutations",sidebar_position:2},sidebar:"docs",previous:{title:"Queries",permalink:"/reference/api-reference/bsff/queries"},next:{title:"Objects",permalink:"/reference/api-reference/bsff/objects"}},l={},a=[{value:"createBsff",id:"createbsff",level:2},{value:"createDraftBsff",id:"createdraftbsff",level:2},{value:"createFicheInterventionBsff",id:"createficheinterventionbsff",level:2},{value:"createPdfAccessToken",id:"createpdfaccesstoken",level:2},{value:"deleteBsff",id:"deletebsff",level:2},{value:"duplicateBsff",id:"duplicatebsff",level:2},{value:"publishBsff",id:"publishbsff",level:2},{value:"signBsff",id:"signbsff",level:2},{value:"updateBsff",id:"updatebsff",level:2},{value:"updateBsffPackaging",id:"updatebsffpackaging",level:2},{value:"updateFicheInterventionBsff",id:"updateficheinterventionbsff",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"createbsff",children:"createBsff"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsff",children:"Bsff!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant de cr\xe9er un nouveau BSFF."}),"\n",(0,t.jsx)(n.p,{children:"Ces champs sont requis :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"type\nemitter {\n  company {\n    name\n    siret\n    address\n    contact\n    phone\n    mail\n  }\n}\ntransporter {\n  company {\n    name\n    siret\n    address\n    contact\n    phone\n    mail\n  }\n}\ndestination {\n  company {\n    name\n    siret\n    address\n    contact\n    phone\n    mail\n  }\n  plannedOperationCode\n}\nwaste {\n  code\n  adr\n  description\n}\nweight {\n  value\n  isEstimate\n}\npackagings {\n  name\n  numero\n  volume\n  weight\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Si vous souhaitez cr\xe9er un BSFF sans ces informations, utilisez createDraftBsff."}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["input",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"inputObjects#bsffinput",children:(0,t.jsx)("code",{children:"BsffInput!"})})]})}),(0,t.jsx)("td",{})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"createdraftbsff",children:"createDraftBsff"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsff",children:"Bsff!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant de cr\xe9er un nouveau BSFF \xe0 l'\xe9tat de brouillon.\nLes seuls champs requis sont le type du BSFF et le n\xb0SIRET de l'\xe9metteur, du transporteur ou du destinataire."}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["input",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"inputObjects#bsffinput",children:(0,t.jsx)("code",{children:"BsffInput!"})})]})}),(0,t.jsx)("td",{})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"createficheinterventionbsff",children:"createFicheInterventionBsff"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsffficheintervention",children:"BsffFicheIntervention!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant de cr\xe9er une fiche d'intervention dans Trackd\xe9chets.\nPermet de reporter une partie des infos d'une fiche d'intervention papier\net d'identifier un d\xe9tenteur d'\xe9quipement. Une fois cr\xe9ee, la fiche d'intervention\npeut-\xeatre jointe \xe0 un BSFF."}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["input",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"inputObjects#bsffficheinterventioninput",children:(0,t.jsx)("code",{children:"BsffFicheInterventionInput!"})})]})}),(0,t.jsx)("td",{})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"createpdfaccesstoken",children:"createPdfAccessToken"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"scalars#string",children:"String!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant d'obtenir un lien de t\xe9l\xe9chargement valide 30 minutes.\nA destination des forces de l'ordre qui ne disposent pas d'acc\xe8s \xe0 Trackd\xe9chets, le lien\nest accessible sans authentification, et peut \xeatre transmis sous la form de QR-code.\nLa cha\xeene retourn\xe9e est l'url de t\xe9l\xe9chargement."}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["input",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"inputObjects#createpdfaccesstokeninput",children:(0,t.jsx)("code",{children:"CreatePdfAccessTokenInput!"})})]})}),(0,t.jsx)("td",{})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"deletebsff",children:"deleteBsff"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsff",children:"Bsff!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant de supprimer un bordereau existant de suivi de fluides frigorig\xe8nes.\n\xc0 condition qu'il n'ait pas encore \xe9t\xe9 sign\xe9."}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["id",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"scalars#id",children:(0,t.jsx)("code",{children:"ID!"})})]})}),(0,t.jsx)("td",{})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"duplicatebsff",children:"duplicateBsff"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsff",children:"Bsff!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant de dupliquer les informations de base d'un BSFF.\nRenvoie un nouveau BSFF \xe0 l'\xe9tat brouillon."}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["id",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"scalars#id",children:(0,t.jsx)("code",{children:"ID!"})})]})}),(0,t.jsx)("td",{})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"publishbsff",children:"publishBsff"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsff",children:"Bsff!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant de publier un brouillon."}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["id",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"scalars#id",children:(0,t.jsx)("code",{children:"ID!"})})]})}),(0,t.jsx)("td",{})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"signbsff",children:"signBsff"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsff",children:"Bsff!"})]}),"\n",(0,t.jsxs)(n.p,{children:["Mutation permettant de signer un ",(0,t.jsx)(n.code,{children:"BSFF"})," lors des diff\xe9rentes \xe9tapes : \xe9mission, transport, r\xe9ception,\nacceptation, op\xe9ration. Chaque mutation verrouille les informations et fait passer le BSFF d'un statut\n\xe0 un autre."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Champs requis pour ",(0,t.jsx)(n.code,{children:"EMISSION"})," :"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"type\nemitter {\n  company {\n    name\n    siret\n    address\n    contact\n    phone\n    mail\n  }\n}\ntransporter {\n  company {\n    name\n    siret\n    address\n    contact\n    phone\n    mail\n  }\n}\ndestination {\n  company {\n    name\n    siret\n    address\n    contact\n    phone\n    mail\n  }\n  plannedOperationCode\n}\nwaste {\n  code\n  adr\n  description\n}\nweight {\n  value\n  isEstimate\n}\npackagings {\n  name\n  numero\n  volume\n  weight\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Champs additionnels requis pour ",(0,t.jsx)(n.code,{children:"TRANSPORT"})," :"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"transporter {\n  transport {\n    mode\n    takenOverAt\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Champs additionnels requis pour ",(0,t.jsx)(n.code,{children:"RECEPTION"})," :"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"destination {\n  reception {\n    date\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Champs additionnels requis pour ",(0,t.jsx)(n.code,{children:"ACCEPTATION"})," :"]})}),"\n",(0,t.jsxs)(n.p,{children:["\xc0 mettre \xe0 jour via la mutation ",(0,t.jsx)(n.code,{children:"updateBsffPackaging"}),". L'acceptation de chaque contenant peut-\xeatre sign\xe9e s\xe9parement\nen pr\xe9cisant un identifiant de contenant."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"packagings {\n  acceptation {\n    date\n    status\n    weight\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Champs additionnels requis pour ",(0,t.jsx)(n.code,{children:"OPERATION"})," :"]})}),"\n",(0,t.jsxs)(n.p,{children:["\xc0 mettre \xe0 jour via la mutation ",(0,t.jsx)(n.code,{children:"updateBsffPackaging"}),". L'op\xe9ration de chaque contenant peut-\xeatre sign\xe9e s\xe9parement\nen pr\xe9cisant un identifiant de contenant."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"packagings {\n  operation {\n    date\n    code\n    mode\n    description\n  }\n}\n"})}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["id",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"scalars#id",children:(0,t.jsx)("code",{children:"ID!"})})]})}),(0,t.jsx)("td",{children:(0,t.jsx)("p",{children:"Identifiant du BSFF \xe0 signer."})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["input",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"inputObjects#bsffsignatureinput",children:(0,t.jsx)("code",{children:"BsffSignatureInput!"})})]})}),(0,t.jsx)("td",{})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"updatebsff",children:"updateBsff"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsff",children:"Bsff!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant de modifier un bordereau existant de suivi de fluides frigorig\xe8nes."}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["id",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"scalars#id",children:(0,t.jsx)("code",{children:"ID!"})})]})}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["input",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"inputObjects#bsffinput",children:(0,t.jsx)("code",{children:"BsffInput!"})})]})}),(0,t.jsx)("td",{})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"updatebsffpackaging",children:"updateBsffPackaging"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsffpackaging",children:"BsffPackaging!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant de modifier les informations de r\xe9ception\net traitement par contenant"}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["id",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"scalars#id",children:(0,t.jsx)("code",{children:"ID!"})})]})}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["input",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"inputObjects#updatebsffpackaginginput",children:(0,t.jsx)("code",{children:"UpdateBsffPackagingInput!"})})]})}),(0,t.jsx)("td",{})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"updateficheinterventionbsff",children:"updateFicheInterventionBsff"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," ",(0,t.jsx)(n.a,{href:"objects#bsffficheintervention",children:"BsffFicheIntervention!"})]}),"\n",(0,t.jsx)(n.p,{children:"Mutation permettant de mettre \xe0 jour une fiche d'intervention."}),"\n",(0,t.jsx)("p",{style:{marginBottom:"0.4em"},children:(0,t.jsx)("strong",{children:"Arguments"})}),"\n",(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Description"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["id",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"scalars#id",children:(0,t.jsx)("code",{children:"ID!"})})]})}),(0,t.jsx)("td",{})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(n.p,{children:["input",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("a",{href:"inputObjects#bsffficheinterventioninput",children:(0,t.jsx)("code",{children:"BsffFicheInterventionInput!"})})]})}),(0,t.jsx)("td",{})]})]})]})]})}function o(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>d});var t=s(7294);const r={},i=t.createContext(r);function d(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);