"use strict";(self.webpackChunktd_doc=self.webpackChunktd_doc||[]).push([[6614],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>k});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=n.createContext({}),o=function(e){var t=n.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):u(u({},t),e)),r},c=function(e){var t=o(e.components);return n.createElement(i.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=o(r),d=a,k=p["".concat(i,".").concat(d)]||p[d]||m[d]||l;return r?n.createElement(k,u(u({ref:t},c),{},{components:r})):n.createElement(k,u({ref:t},c))}));function k(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,u=new Array(l);u[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[p]="string"==typeof e?e:a,u[1]=s;for(var o=2;o<l;o++)u[o]=r[o];return n.createElement.apply(null,u)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},6192:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>u,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>o});var n=r(7462),a=(r(7294),r(3905));const l={id:"queries",title:"Queries",slug:"queries",sidebar_position:1},u=void 0,s={unversionedId:"reference/api-reference/user-company/queries",id:"reference/api-reference/user-company/queries",title:"Queries",description:"companyInfos",source:"@site/docs/reference/api-reference/user-company/queries.md",sourceDirName:"reference/api-reference/user-company",slug:"/reference/api-reference/user-company/queries",permalink:"/reference/api-reference/user-company/queries",draft:!1,editUrl:"https://github.com/MTES-MCT/trackdechets/edit/dev/doc/docs/reference/api-reference/user-company/queries.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"queries",title:"Queries",slug:"queries",sidebar_position:1},sidebar:"docs",previous:{title:"Scalars",permalink:"/reference/api-reference/bsvhu/scalars"},next:{title:"Mutations",permalink:"/reference/api-reference/user-company/mutations"}},i={},o=[{value:"companyInfos",id:"companyinfos",level:2},{value:"ecoOrganismes",id:"ecoorganismes",level:2},{value:"me",id:"me",level:2},{value:"membershipRequest",id:"membershiprequest",level:2},{value:"myCompanies",id:"mycompanies",level:2},{value:"searchCompanies",id:"searchcompanies",level:2}],c={toc:o},p="wrapper";function m(e){let{components:t,...r}=e;return(0,a.kt)(p,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"companyinfos"},"companyInfos"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Type:")," ",(0,a.kt)("a",{parentName:"p",href:"/reference/api-reference/user-company/objects#companypublic"},"CompanyPublic!")),(0,a.kt)("p",null,"Renvoie des informations autoris\xe9es \xe0 la diffusion publique sur un \xe9tablissement\nLes informations proviennent de l'INSEE (Sirene) ou de la base europ\xe9enne VIES\npour les num\xe9ros de TVA intracommunautaires (entreprises hors France)\nainsi que de la base des installations class\xe9es pour la protection de l'environnement (ICPE)"),(0,a.kt)("p",{style:{marginBottom:"0.4em"}},(0,a.kt)("strong",null,"Arguments")),(0,a.kt)("table",null,(0,a.kt)("thead",null,(0,a.kt)("tr",null,(0,a.kt)("th",null,"Name"),(0,a.kt)("th",null,"Description"))),(0,a.kt)("tbody",null,(0,a.kt)("tr",null,(0,a.kt)("td",null,"siret",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#string"},(0,a.kt)("code",null,"String"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"SIRET de l'\xe9tablissement, supporte aussi un num\xe9ro TVA intracommunautaire"))),(0,a.kt)("tr",null,(0,a.kt)("td",null,"clue",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#string"},(0,a.kt)("code",null,"String"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"Autre identifiant, par ex. num\xe9ro TVA intracommunautaire"))))),(0,a.kt)("h2",{id:"ecoorganismes"},"ecoOrganismes"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Type:")," ",(0,a.kt)("a",{parentName:"p",href:"/reference/api-reference/user-company/objects#ecoorganisme"},"[EcoOrganisme!]!")),(0,a.kt)("p",null,"Renvoie la liste des \xe9co-organismes"),(0,a.kt)("h2",{id:"me"},"me"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Type:")," ",(0,a.kt)("a",{parentName:"p",href:"/reference/api-reference/user-company/objects#user"},"User!")),(0,a.kt)("p",null,"Renvoie les informations sur l'utilisateur authentifi\xe9"),(0,a.kt)("h2",{id:"membershiprequest"},"membershipRequest"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Type:")," ",(0,a.kt)("a",{parentName:"p",href:"/reference/api-reference/user-company/objects#membershiprequest"},"MembershipRequest!")),(0,a.kt)("p",null,"R\xe9cup\xe8re une demande de rattachement effectu\xe9e par l'utilisateur courant\n\xe0 partir de l'identifiant de cette demande ou du SIRET de l'\xe9tablissement\nauquel l'utilisateur a demand\xe9 \xe0 \xeatre rattach\xe9. L'un ou l'autre des\nparam\xe8tres (id ou siret) doit \xeatre \xeatre pass\xe9 mais pas les deux. Cette query\npermet notamment de suivre l'\xe9tat d'avancement de la demande de rattachement\n(en attente, accept\xe9, refus\xe9)"),(0,a.kt)("p",{style:{marginBottom:"0.4em"}},(0,a.kt)("strong",null,"Arguments")),(0,a.kt)("table",null,(0,a.kt)("thead",null,(0,a.kt)("tr",null,(0,a.kt)("th",null,"Name"),(0,a.kt)("th",null,"Description"))),(0,a.kt)("tbody",null,(0,a.kt)("tr",null,(0,a.kt)("td",null,"id",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#id"},(0,a.kt)("code",null,"ID"))),(0,a.kt)("td",null)),(0,a.kt)("tr",null,(0,a.kt)("td",null,"siret",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#string"},(0,a.kt)("code",null,"String"))),(0,a.kt)("td",null)))),(0,a.kt)("h2",{id:"mycompanies"},"myCompanies"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Type:")," ",(0,a.kt)("a",{parentName:"p",href:"/reference/api-reference/user-company/objects#companyprivateconnection"},"CompanyPrivateConnection!")),(0,a.kt)("p",null,"Liste pagin\xe9e des \xe9tablissements de l'utilisateur authentifi\xe9 tri\xe9e par ordre alphab\xe9tique\ndu nom usuel et par d\xe9faut par date de cr\xe9ation de l'\xe9tablissement"),(0,a.kt)("p",{style:{marginBottom:"0.4em"}},(0,a.kt)("strong",null,"Arguments")),(0,a.kt)("table",null,(0,a.kt)("thead",null,(0,a.kt)("tr",null,(0,a.kt)("th",null,"Name"),(0,a.kt)("th",null,"Description"))),(0,a.kt)("tbody",null,(0,a.kt)("tr",null,(0,a.kt)("td",null,"first",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#int"},(0,a.kt)("code",null,"Int"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"Pagination croissante avec first et after"))),(0,a.kt)("tr",null,(0,a.kt)("td",null,"after",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#id"},(0,a.kt)("code",null,"ID"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"Pagination croissante avec first et after"))),(0,a.kt)("tr",null,(0,a.kt)("td",null,"last",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#int"},(0,a.kt)("code",null,"Int"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"Pagination d\xe9croissante avec last et before"))),(0,a.kt)("tr",null,(0,a.kt)("td",null,"before",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#id"},(0,a.kt)("code",null,"ID"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"Pagination d\xe9croissante avec last et before"))),(0,a.kt)("tr",null,(0,a.kt)("td",null,"search",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#string"},(0,a.kt)("code",null,"String"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"USAGE INTERNE - Filtre par nom, siret ou num\xe9ro de TVA - cha\xeene comprise entre 3 et 30 caract\xe8res"))))),(0,a.kt)("h2",{id:"searchcompanies"},"searchCompanies"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Type:")," ",(0,a.kt)("a",{parentName:"p",href:"/reference/api-reference/user-company/objects#companysearchresult"},"[CompanySearchResult!]!")),(0,a.kt)("p",null,"Effectue une recherche floue sur la base SIRENE et enrichie\navec des informations provenant de Trackd\xe9chets\nSi vous envoyez un num\xe9ro de SIRET ou de TVA la recherche renverra un seul item\nidendique \xe0 celui de la requ\xeate companyInfos (ignorant alors le champ department)."),(0,a.kt)("p",{style:{marginBottom:"0.4em"}},(0,a.kt)("strong",null,"Arguments")),(0,a.kt)("table",null,(0,a.kt)("thead",null,(0,a.kt)("tr",null,(0,a.kt)("th",null,"Name"),(0,a.kt)("th",null,"Description"))),(0,a.kt)("tbody",null,(0,a.kt)("tr",null,(0,a.kt)("td",null,"clue",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#string"},(0,a.kt)("code",null,"String!"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"Champ utilis\xe9 pour faire une recherche floue sur le nom de l'\xe9tablissement, ex: 'Boulangerie Dupont', ou sur le num\xe9ro de SIRET ou TVA intracommunautaire"))),(0,a.kt)("tr",null,(0,a.kt)("td",null,"department",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#string"},(0,a.kt)("code",null,"String"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"(Optionnel) Filtre les r\xe9sultats par num\xe9ro de d\xe9partement fran\xe7ais"))),(0,a.kt)("tr",null,(0,a.kt)("td",null,"allowForeignCompanies",(0,a.kt)("br",null),(0,a.kt)("a",{href:"/reference/api-reference/user-company/scalars#boolean"},(0,a.kt)("code",null,"Boolean"))),(0,a.kt)("td",null,(0,a.kt)("p",null,"(Optionnel) Filtre les r\xe9sultats \xe9trangers uniquement, si 'clue' est un num\xe9ro de TVA intra-communautaire non-fran\xe7ais et allowForeignCompanies, alors aucun r\xe9sultat ne sera retourn\xe9"))))))}m.isMDXComponent=!0}}]);