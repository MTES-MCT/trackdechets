version: "3"
services:

  postgres:
    image: betagouv/trackdechets-postgres:dev
    restart: always
    environment:
      POSTGRES_USER: $POSTGRES_USER
      POSTGRES_PASSWORD: $POSTGRES_PASSWORD
      AIRFLOW_POSTGRES_USER: $AIRFLOW_POSTGRES_USER
      AIRFLOW_POSTGRES_PASSWORD: $AIRFLOW_POSTGRES_PASSWORD
    volumes:
      - postgres:/var/lib/postgresql/data

  td-api:
    image: betagouv/trackdechets-api:dev
    environment:
      NODE_ENV: dev

  td-ui:
    image: betagouv/trackdechets-ui:dev

  td-insee:
    image: betagouv/trackdechets-insee:dev

  td-pdf:
    image: betagouv/trackdechets-pdf:dev
    environment:
      PDF_WATERMARK: display

  td-mail:
    image: betagouv/trackdechets-mail:dev

  td-doc:
    image: betagouv/trackdechets-doc:dev

  td-etl:
    image: betagouv/trackdechets-etl:dev

